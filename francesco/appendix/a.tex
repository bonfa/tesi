\appendix
\chapter{Appendix A}\label{appA}
	
	\section{Actual implementation of the software}
	
		\subsection{Overview}\label{impl_arch}
		Figure \ref{fig:implementation_names} shows the class diagram of the Vision Module. 
		According to the design specifications defined in chapter \ref{chDesign}, the module is composed by the sub-modules \emph{Server} and \emph{Visual Operation}. 
		The latter is split in three parts, each one with its own tasks.

		\begin{figure}[h]
		  \begin{center} 
		    \fbox{	
		       \includegraphics[width=\textwidth*\real{0.9}]{images/ch_06/implementazione_solo_nomi.jpg}
		    }
		  \end{center} 
		  \caption{\textit{Class diagram which illustrates the whole architecture of the Vision Module}}  
		  \label{fig:implementation_names}
	 	\end{figure}
 
		Classes \emph{Server} and \emph{Session} represent the Server sub-module.
		All the other classes compose the Visual Operation one.


		Classes \emph{Proxy}, \emph{FeatureGetter}, \emph{Input}, \emph{FeatureExtractor}, \emph{MarkerDetector} and \emph{QRScanner} have the role of extracting features from the input data and preparing the messages to be sent to the cognitive architecture.
		\emph{Object}, \emph{BoundingBox}, \emph{Blob}, \emph{QR}, \emph{Circle}, \emph{Triangle}, \emph{Quadrilateral}, \emph{Marker} and \emph{Button} form the object hierarchy.
		\emph{InputException}, \emph{NotOverlappedSegmentException}, \emph{ParallelLinesException}, \emph{VerticalLineException}, \emph{CoincidentLinesException}, \emph{FourPointsSorter}, \emph{StraightLine}, \emph{Segment} and \emph{Point} represent the utility classes.
	
		
		\subsection{Server Module}
		The sub-module server, responsible for the communication with the \mbox{Lisp} interpreter, is composed by the classes \emph{Server} and \emph{Session}. 
		Figure \ref{fig:impl_feat_extraction} contains the classes that implement this service.

		\begin{figure}[h]
		  \begin{center} 
		    \fbox{	
		       \includegraphics[width=\textwidth*\real{0.9}]{images/ch_06/communication.jpg}
		    }
		  \end{center} 
		  \caption{\textit{Class diagram describing the implementation part of the software dedicated to the communication}}  
		  \label{fig:impl_feat_extraction}
	 	\end{figure}	

		An instance of the class Server is running in background and listening for new tcp connections. 
		When a client ask for a connection, the \emph{boost::asio::io service} calls the Server callback, which creates a new instance of Session.
		The Boost library is responsible for managing either the Server and the Session.
		The two classes have been developed following the Boost library specifications.
		When the Session object receives a message requesting the extraction of the features, it creates an instance of Proxy and calls the proper methods of this object in order to complete its task.

		\newpage
		\subsection{Utility Part}
		The classes which form the utility parts of the software are divided in two categories: the exception classes and the ones representing all the other utilities. 
		To these, two modules containing functions are added. 
		Figure \ref{fig:impl_utility} shows a class diagram containing all the classes that constitute this part of the software. 
		The modules, as not classes, can not be shown in the diagram.

		\begin{figure}[h]
		  \begin{center} 
		    \fbox{	
		       \includegraphics[width=\textwidth]{images/appendix/utility.png}
		    }
		  \end{center} 
		  \caption{\textit{Class diagram showing the utility part of the software}}  
		  \label{fig:impl_utility}
	 	\end{figure}

		Classes \emph{InputException}, \emph{NotOverlappedSegmentException}, \emph{ParallelLinesException}, \emph{VerticalLineException} and \emph{CoincidentLinesException} are the exceptions classes. 
		As such, they are used to handle all the anomalous or exceptional events occurring at run-time.	
	
		\emph{StraightLine}, \emph{Segment} and \emph{Point} represent geometrical entities. These elements serve as basic structures for creating the objects in the hierarchy and making evaluations between couples of objects.
		Such evaluations can be both qualitative and quantitative, as, for example, the distances between the centers of two objects or the relative positions of one object in respect with another.
		
		\emph{FourPointsSorter} and the function modules contain the basic methods which are fundamental for all the operations executed by all the other classes of the software.
		For reasons of completeness the prototypes of the functions are listed in appendix \ref{appA}.

